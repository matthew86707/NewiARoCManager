<div class="container">
<div class = "row">
<h1 align="center"> Live Feed </h1>
<br>
</div>
<div class = "row">

<div class="col-md-6">
<div class="panel panel-primary">
  <div class="panel-heading">
    <h3> Next Matches</h3>
  </div>
  <div class="panel-body">
	<div id="matchesContent">
	</div>
   
</div>
</div>
</div>





 <script type="text/javascript">
$(document).ready(function () {
$.ajax({
    type: "GET",
    url: "/index/matches/data",
    dataType: "xml",
    success: matchesXmlParser
   });
});

function matchesXmlParser(xml) {


$(xml).find("Match").each(function () {
	var unix = parseInt($(this).find("time").text());
	var dt = new Date(unix*1000);
	var current = new Date();
	var timeLabel = "<span class='label label-info'>" + dt.getHours() + ":" + dt.getMinutes() + "</span>";
	if(dt > current){
    	timeLabel = "<span class='label label-primary'>LIVE</span>";
    }
    $("#matchesContent").append("<div class='well' style='font-size: 20'><b>" + $(this).find("teamA").text() + "</b> &nbsp VS &nbsp <b>" + $(this).find("teamB").text() + "</b> <div class='pull-right'>"+ timeLabel + "</div></div>");
    	
   
 });

}
</script>




<div class="col-md-6">
<div class="panel panel-primary">
  <div class="panel-heading">
    <h3> Current Standings</h3>
  </div>
  <div class="panel-body">
  
    <ul class="list-group">
    
  <script type="text/javascript">
$(document).ready(function () {
$.ajax({
    type: "GET",
    url: "/index/teams/data",
    dataType: "xml",
    success: teamsXmlParser
   });
});

function teamsXmlParser(xml) {


$(xml).find("Team").each(function () {

    $(".content").append("<li class='list-group-item'> <span class='badge'>" + $(this).find("points").text() + "</span>" + $(this).find("name").text() + "</li>");
   
 });

}
</script>
    
    <div class="content">
  	
  	</div>
    
</ul>
	
	</div>
  </div>
</div>
</div>

  <script type="text/javascript">
    setInterval(function() {
    	$.ajax({
    type: "GET",
    url: "/index/live/info",
    dataType: "xml",
    success: mssgXmlParser
   });
	}, 6000); //5 seconds
	
	function mssgXmlParser(xml) {


$(xml).find("mssg").each(function () {
var current = $(this);
$('#mssgContainer').animate({'opacity': 0}, 1000, function () {
    $(".messages").text((current).text());
}).animate({'opacity': 1}, 1000);

   // $(".messages").text(($(this).text()));
   
 });

}
	
  </script>
  <br>
  <br>
  <div class="row">
  <div class="col-md-12">
<div class="panel panel-primary">
  <div class="panel-heading">
    <h4> Announcements</h4>
  </div>
  <div class="panel-body">

<div align=center id="mssgContainer" class="messages" style="color: red; font-size : 24">

</div>
	
</div>
</div>

</div>

</div>


